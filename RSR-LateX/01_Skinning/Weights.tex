\subsection{Weigths}

Um die Bewegung des Gittergraphen über den Skelett genau zu kontrollieren können wir jeden Punkt isoliert betrachten. Für jeden einzelnen Punkt können wir festlegen, wie er auf Bewegungen des Skeletts reagieren soll. So können wir zum Beispiel bestimmen, dass ein Punkt auf dem Ellenbogen eines Menschen sich bewegen soll, wenn Oberarm oder Unterarm sich bewegen, oder dass er sich zwar bewegen soll, aber anders als andere Punkte. So könnte man zum Beispiel definieren, dass Punkte sich immer weniger bewegen sollen, je näher sie einem anderen Knochen kommen. Diese Kontrolle über die Bewegung eines Punktes nennt sich Gewichte.


\begin{figure}[t]
		\includegraphics[width=7cm]{01_Skinning/pics/weight.png}
		\caption[Flächige Gewichtsverteilung]{ Modelldarstellung der flächigen Gewichtsverteilung auf einem Mesh. Die Farben beschreiben die Verteilung der Gewichte auf einer Skala von Blau=0, damit unabhängig, zu Rot=1, damit komplett abhängig. Entnommen von \cite{weights}}
		\label{weights_fig1}
\end{figure}

Gewichte bezeichnen, wie abhängig ein Punkt auf dem Gittergraphen bei einer Transformation von einem Knochen ist. Sie sind die Lösung, um bei verformbarem Material abzuschätzen, inwiefern sich jeder Punkt auf der Haut beeinflussen lässt. Dieses Gewicht $wi$ in Relation zu Knochen $i$, ist $0<=wi<=1$. Wobei 0 komplett unabhängig von dem Knochen und 1 komplett von dem Knochen abhängig ist. So wäre zum Beispiel ein Punkt auf dem Oberarm des Knochen diesem komplett mit einer 1 zugehörig, ein Punkt an der Hüfte hätte ein Gewicht von 0 am Oberarm und wäre damit komplett unabhängig von diesem. Gewichte von Punkten am Ellbogengelenk hätten variierende Werte zwischen 0 und 1. 

Nun könnten wir für jeden Vertex eine Liste  mit allen seinen Gewichten in Bezug auf jeden Knochen erstellen, um zusammengefasst darzustellen, wie ein Punkt sich durch das Skelett bewegen lässt. In der Summe entsprechen alle seine Gewichte immer 1, ergo $\sum_{i=1}^{N}wi=1$. Dies ist darin begründet, dass das Material der Haut im Normalfall eine konstante Beweglichkeit aufweist. Hätte ein Punkt eine höhere Summe an Gewichten als ein anderer, würde dies darauf hindeuten, das er sich leichter und von mehr Knochen bewegen ließe. Natürlich wird nicht jeder Punkt eines Modells in der Animation gleich verformt, dies ist dann aber darauf zurückzuführen, dass Knochen des zu Grunde liegenden Skelettes weniger bewegt werden, woraufhin die Knochen, die in Verbindung mit ihnen gebracht werden, proportional zu ihrem Gewicht weniger Bewegung erfahren. Zum Beispiel ein Punkt am Bauch wird wesentlich weniger bewegt werden als Punkte an den Extremitäten. 

Um Gewichte zuzuordnen können verschiedene Verfahren angewandt werden, unter anderem Distanz-basierte Algorithmen oder durch Lösung eines "{}least squares problems"{} \cite{wang2002multi}. Oft ist es jedoch am effektivsten, wenn durch Künstler auf Grundlage anatomischer Kenntnisse die Gittergraphen selber nach Gewichten einfärbt werden \cite{LectureA}.

Ein recht interessanter Ansatz ist jedoch hier \cite{embedding} zu finden. Die Autoren standen vor dem selben Problem, dass Gewichte in der Regel manuell vergeben werden, wollten aber einen automatischen Ansatz verwenden. Werden die Gewichte automatisch nach Nähe zu Knochen verteilt, kann dies zu Problem führen. So würden zum Beispiel Punkte auf dem Oberkörper, an welchen ein Arm eng anliegt, hohe Gewichte auf dem Oberarmknochen erhalten, obwohl dieser Knochen sie wahrscheinlich minimal beeinflusst. Stattdessen wird in diesem Paper Gewicht wie Hitze behandelt, welche sich gleichmäßig über die Oberfläche verteilt, wie auf Abbildung 10 zu sehen.

\begin{figure}[t]
	\includegraphics[width=7cm]{01_Skinning/pics/heat.png}
	\caption[Hitze Equilibrium zur Gewichtsverteilung]{ Hitze Gleichgewicht an zwei Knochen. Entnommen von \cite{embedding}}
	\label{heat_fig1}
\end{figure}

Es wird angenommen, dass bei Knochen $i$ die Hitze 1 ist, bei allen anderen Knochen 0. Dann bestimmen wir das Gewicht jedes Punktes zu Knochen $i$ als seine Hitze. Dieses Vorgehen basiert auf Basis eines Hitzegleichgewichts. Der in diesem Paper entwickelte Algorithmus wird inzwischen weit verbreitet in der Industrie eingesetzt. Zum Beispiel bei der bekannten Software Blender. 



